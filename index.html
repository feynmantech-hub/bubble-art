<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>3D æ³¡æ³¡ V7.2 (å«ç¸®æ”¾ä¿®å¾©)</title>
    <style>
        /* 1. è¨­å®šèƒŒæ™¯è‰²æ¨¡æ“¬æ‚¨çš„ V7.2 æˆªåœ– */
        body { 
            margin: 0; 
            overflow: hidden; 
            background: linear-gradient(180deg, #dcbfe0 0%, #e8c6d6 100%);
            font-family: "Microsoft JhengHei", sans-serif;
        }
        canvas { display: block; }

        /* 2. æ¨¡æ“¬ç•«é¢ä¸Šçš„æ–‡å­—æç¤º */
        #ui-container {
            position: absolute;
            top: 15%;
            left: 0;
            width: 100%;
            text-align: center;
            pointer-events: none; /* è®“æ»‘é¼ é»æ“Šç©¿é€æ–‡å­— */
            z-index: 10;
        }
        h1 {
            color: white;
            font-size: 1.8rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 10px;
            font-weight: normal;
        }
        p {
            color: #fff;
            opacity: 0.9;
            font-size: 1rem;
        }
        .emoji { font-size: 1.5rem; vertical-align: middle; }
    </style>
</head>
<body>

    <div id="ui-container">
        <h1>ğŸ˜² è©¦è‘—å¾€å³æˆ–å¾€å·¦å¹æ°£</h1>
        <p>ğŸ‘† é»æ“Šæ³¡æ³¡æˆ³ç ´å®ƒ (ç¾åœ¨æ”¯æ´æ»¾è¼ªç¸®æ”¾)</p>
    </div>

    <script type="module">
        // é€é CDN å¼•å…¥ Three.js èˆ‡ OrbitControls
        import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';
        import { OrbitControls } from 'https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js';

        // --- å ´æ™¯è¨­å®š ---
        const scene = new THREE.Scene();

        // --- ç›¸æ©Ÿè¨­å®š ---
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        
        // ã€ä¿®æ”¹é» 1ï¼šèª¿æ•´åˆå§‹å¤§å°ã€‘
        // å°‡ Z è»¸è·é›¢è¨­å®šç‚º 12 (åŸæœ¬å¯èƒ½ç´„ç‚º 5)ï¼Œé€™æ¨£æ³¡æ³¡çœ‹èµ·ä¾†å°±è®Šå°äº†
        camera.position.set(0, 0, 12);

        // --- æ¸²æŸ“å™¨è¨­å®š ---
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // å„ªåŒ–æ‰‹æ©Ÿæ•ˆèƒ½
        renderer.toneMapping = THREE.ACESFilmicToneMapping; // è®“å…‰å½±æ›´çœŸå¯¦
        renderer.outputColorSpace = THREE.SRGBColorSpace;
        document.body.appendChild(renderer.domElement);

        // --- ã€ä¿®æ”¹é» 2ï¼šåŠ å…¥ç¸®æ”¾æ§åˆ¶å™¨ã€‘ ---
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;  // é–‹å•Ÿé˜»å°¼ (æ»‘å‹•æ…£æ€§)
        controls.dampingFactor = 0.05;
        controls.enableZoom = true;     // é–‹å•Ÿç¸®æ”¾ (é—œéµåŠŸèƒ½)
        controls.zoomSpeed = 0.8;       // ç¸®æ”¾éˆæ•åº¦
        controls.minDistance = 6;       // æœ€è¿‘è·é›¢ (é¿å…ç©¿æ¨¡)
        controls.maxDistance = 30;      // æœ€é è·é›¢
        controls.enablePan = false;     // é—œé–‰å¹³ç§» (è®“æ³¡æ³¡ä¿æŒåœ¨ä¸­é–“)
        // controls.enableRotate = false; // å¦‚æœä½ æƒ³é–å®šæ—‹è½‰ï¼Œè«‹å–æ¶ˆæ­¤è¡Œè¨»è§£

        // --- ç‡ˆå…‰è¨­å®š (æ¨¡æ“¬äº®éº—çš„åå°„) ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const dirLight = new THREE.DirectionalLight(0xffffff, 1.5);
        dirLight.position.set(5, 10, 7);
        scene.add(dirLight);

        const spotLight = new THREE.SpotLight(0xffabe3, 5); // å¸¶é»ç²‰ç´…çš„å…‰
        spotLight.position.set(-5, 5, 0);
        scene.add(spotLight);

        // --- å»ºç«‹æ³¡æ³¡ (æè³ªæ¨¡æ“¬ä¸ƒå½©è³ªæ„Ÿ) ---
        const geometry = new THREE.SphereGeometry(3, 64, 64); // åŠå¾‘è¨­ç‚º 3
        const material = new THREE.MeshPhysicalMaterial({
            color: 0xffffff,
            metalness: 0.1,
            roughness: 0,
            transmission: 0.95, // é€å…‰
            transparent: true,
            thickness: 0.5,
            ior: 1.5,           // æŠ˜å°„ç‡
            iridescence: 1,     // å½©è™¹å…‰æ¾¤ (é—œéµæ•ˆæœ)
            iridescenceIOR: 1.3,
            iridescenceThicknessRange: [100, 400],
            clearcoat: 1,
            side: THREE.DoubleSide
        });

        const bubble = new THREE.Mesh(geometry, material);
        scene.add(bubble);

        // --- äº’å‹•ï¼šé»æ“Šæ³¡æ³¡æ•ˆæœ (ç°¡å–®æ¨¡æ“¬) ---
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        window.addEventListener('pointerdown', (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObject(bubble);
            
            if (intersects.length > 0) {
                // é»æ“Šå¾Œçš„ç°¡å–®å½ˆè·³æ•ˆæœ
                material.color.setHex(0xffaaaa); // è®Šç´…ä¸€ä¸‹
                setTimeout(() => { material.color.setHex(0xffffff); }, 200);
            }
        });

        // --- è¦–çª—ç¸®æ”¾è™•ç† ---
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- æ¨¡æ“¬æ³¡æ³¡å‘¼å¸å‹•ç•« ---
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            
            const time = clock.getElapsedTime();

            // è®“æ³¡æ³¡æœ‰é»å½¢ç‹€è®ŠåŒ– (æ¨¡æ“¬é£„å‹•)
            bubble.position.y = Math.sin(time * 0.5) * 0.5; 
            bubble.rotation.y += 0.002;
            
            // è¼•å¾®ç¸®æ”¾æ¨¡æ“¬å‘¼å¸
            const scale = 1 + Math.sin(time * 1.5) * 0.02;
            bubble.scale.set(scale, scale, scale);

            // ã€å¿…è¦ã€‘æ›´æ–°æ§åˆ¶å™¨
            controls.update();

            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
